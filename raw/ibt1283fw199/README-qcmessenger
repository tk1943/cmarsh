http://home.mag.cx/messenger/source/

download and make 

move qcmessenger.ko to ibt1283

insmod qcmessenger.ko

usbcore: deregistering driver uvcvideo
qcmessenger [13.701336]: ----------LOADING QUICKCAM MODULE------------
qcmessenger [13.701406]: struct quickcam size: 3896
usbcore: registered new driver qcmessenger
usb 1-2: USB disconnect, address 6
usb 2-2: new full speed USB device using ohci_hcd and address 4
qcmessenger: QuickCam USB camera found (driver version QuickCam Messenger/Communicate USB 1.8 $Date: 2008/05/26 00:00:00 $)
qcmessenger: Kernel:2.6.12.6-VENUS bus:2 class:FF subclass:FF vendor:046D product:08F0
qcmessenger [39.750501]: poisoning qc in qc_usb_init
qcmessenger [39.759808]: E00A contains 08F0
qcmessenger: Sensor VV6450 detected
qcmessenger [39.771459]: Quickcam snapshot button registered on usb-ohci_hcd-2/input0
qcmessenger: Registered device: /dev/video0


/tmp/usbmounts/sda1/PUBLIC/IPK # ./hellov4l2 -d /dev/v4l/video0
[1.open_device] open /dev/v4l/video0 
VIDIOC_QUERYCAP error 22, Unknown error 515


/tmp/usbmounts/sda1/PUBLIC/IPK #  /opt/bin/ffmpeg -r 1 -f video4linux -s 320x240 -i /dev/v4l/video0 -t 5 -y test1.avi
FFmpeg version UNKNOWN, Copyright (c) 2000-2008 Fabrice Bellard, et al.
  configuration: --enable-cross-compile --cross-prefix=/home/slug/optware/oleg/toolchain/mipsel-linux-uclibc/gcc-4.1.1-uclibc-0.9.28/bin/mipsel-linux-uclibc- --arch=mipsel --disable-encoder=snow --disable-decoder=snow --enable-shared --disable-static --enable-gpl --enable-postproc --prefix=/opt
  libavutil version: 49.6.0
  libavcodec version: 51.54.0
  libavformat version: 52.13.0
  libavdevice version: 52.0.0
  built on Nov 23 2010 22:56:54, gcc: 4.1.1
Input #0, video4linux, from '/dev/v4l/video0':
  Duration: N/A, start: 1301335350.879649, bitrate: 1228 kb/s
    Stream #0.0: Video: rawvideo, yuyv422, 320x240, 1228 kb/s,  1.00 tb(r)
File 'test1.avi' already exists. Overwrite ? [y/N] y
Output #0, avi, to 'test1.avi':
    Stream #0.0: Video: mpeg4, yuv420p, 320x240, q=2-31, 200 kb/s,  1.00 tb(c)
Stream mapping:
  Stream #0.0 -> #0.0
Press [q] to stop encoding
frame=    5 fps=  0 q=2.0 Lsize=      51kB time=5.0 bitrate=  84.3kbits/s    
video:46kB audio:0kB global headers:0kB muxing overhead 12.380790%


/tmp/usbmounts/sda1/PUBLIC/IPK #  /opt/bin/ffmpeg -r 1 -f video4linux -s 320x240 -i /dev/v4l/video0 -vframes 1 test1.jpeg
FFmpeg version UNKNOWN, Copyright (c) 2000-2008 Fabrice Bellard, et al.
  configuration: --enable-cross-compile --cross-prefix=/home/slug/optware/oleg/toolchain/mipsel-linux-uclibc/gcc-4.1.1-uclibc-0.9.28/bin/mipsel-linux-uclibc- --arch=mipsel --disable-encoder=snow --disable-decoder=snow --enable-shared --disable-static --enable-gpl --enable-postproc --prefix=/opt
  libavutil version: 49.6.0
  libavcodec version: 51.54.0
  libavformat version: 52.13.0
  libavdevice version: 52.0.0
  built on Nov 23 2010 22:56:54, gcc: 4.1.1
Input #0, video4linux, from '/dev/v4l/video0':
  Duration: N/A, start: 1301335636.649791, bitrate: 1228 kb/s
    Stream #0.0: Video: rawvideo, yuyv422, 320x240, 1228 kb/s,  1.00 tb(r)
Unable to find a suitable output format for 'test1.jpeg'


//  IMS invoke http://127.0.0.1:8081/a.php

<?php
header('Content-Type: text/xml');
echo '<?xml version="1.0" ?>';
echo "\r\n";
exec('/opt/bin/ffmpeg -r 10 -f video4linux -s 320x240 -i /dev/v4l/video0 -t 5 -y /tmp/usbmounts/sda1/PUBLIC/test1.avi');
?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
       <title>Get AVI OK</title>
      <item>
      <title>AVI OK</title>
      <link>http://127.0.0.1:8081/</link>
      </item>
  </channel>
</rss>

play test1.avi ok.

